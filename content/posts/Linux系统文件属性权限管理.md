---
title: Linux系统文件属性权限管理 
subtitle:
date: 2021-02-03T21:41:18+08:00
slug: krbqee0p
tags:
  - Linux
  - 文件权限
categories:
  - 系统管理
collections:
  - Linux基础
---

### 查看和修改文件权限详解

文件的属性和权限是 Linux 文件系统管理中的重要概念，通过它可以灵活地控制用户对文件和目录的访问权限。

---

### 查看文件属性

文件的属性显示了文件的类型、权限、所属用户和组，以及其他文件的相关信息。

#### 使用 `ls -l` 查看文件属性

```bash
vnxi@Debian:~$ ls -l
-rw-r--r-- 1 root root    2981 Mar  9 11:58 adduser.conf
-rw-r--r-- 1 root root      44 Mar  9 12:12 adjtime
drwxr-xr-x 2 root root    4096 Mar 13 06:22 alternatives
drwxr-xr-x 2 root root    4096 Mar  9 11:59 apparmor
```

**文件属性说明：**

1. **第一个字符**表示文件类型：
   * `-` 表示普通文件。
   * `d` 表示目录。
   * `l` 表示符号链接。
   * `c` 表示字符设备文件。
   * `b` 表示块设备文件。
2. **接下来的九个字符**由三组 `(rwx)` 组成：
   * 每组表示用户、用户组和其他用户的权限。
   * 权限字符含义：
     * `r`：读权限。
     * `w`：写权限。
     * `x`：执行权限。
     * `-`：无权限。
3. ​**`root root`**​：前一个 `root` 是文件的所有者，后一个 `root` 是文件所属组。
4. ​**文件大小**​：以字节为单位显示文件大小。
5. ​**修改时间**​：文件最后一次修改的时间。
6. ​**文件名**​：文件的名称。

**权限的含义：**

| **权限** | **对文件的意义** | **对目录的意义**     |
| ---------------- | ------------------------ | ---------------------------- |
| `r`        | 可以查看文件内容       | 可以列出目录中的内容       |
| `w`        | 可以修改文件内容       | 可以创建、删除目录中的文件 |
| `x`        | 可以执行文件（如脚本） | 可以进入目录               |

---

### 修改文件权限

#### 使用 `chmod` 修改文件权限

`chmod` 命令用于更改用户对文件或目录的权限。

**语法：**

```bash
chmod [-R] xyz 文件或目录
```

**参数说明：**

* `xyz`：权限值，由 `r=4`，`w=2`，`x=1` 组成，分别为用户、组、其他用户设置权限。
* `-R`：递归修改，包括子目录和文件。

**示例：**

1. 文件权限为 `-rwxrwx---`：
   
   * `owner = rwx = 4+2+1 = 7`
   * `group = rwx = 4+2+1 = 7`
   * `others = --- = 0+0+0 = 0`
   * 对应权限数字为：`770`。
   
   修改权限：
   
   ```bash
   chmod 770 filename
   ```
2. 文件权限为 `-rw-------`：
   
   * `owner = rw- = 4+2+0 = 6`
   * `group = --- = 0+0+0 = 0`
   * `others = --- = 0+0+0 = 0`
   * 对应权限数字为：`600`。
   
   修改权限：
   
   ```bash
   chmod 600 filename
   ```

---

#### 使用 `chgrp` 和 `chown` 修改属组和所有者

1. ​**`chgrp` 命令**​：更改文件的所属组。 **语法：**
   
   ```bash
   chgrp [-R] 属组名 文件名
   ```
   
   * `-R`：递归更改子目录和文件的属组。
   
   **示例：**
   
   ```bash
   chgrp developers test.txt
   ```
2. ​**`chown` 命令**​：更改文件的所有者或同时更改所有者和属组。 **语法：**
   
   ```bash
   chown [-R] 属主名 文件名
   chown [-R] 属主名:属组名 文件名
   ```
   
   **示例：**
   
   * 仅更改所有者：
     ```bash
     chown vnxi test.txt
     ```
   * 更改所有者和属组：
     ```bash
     chown vnxi:developers test.txt
     ```

---

### 修改权限实例

假如有文件 `test.txt`：

1. 修改所有者为 `vnxi`：
   ```bash
   chown vnxi test.txt
   ```
2. 修改所有者和所属组为 `vnxi`：
   ```bash
   chown vnxi:vnxi test.txt
   ```
3. 修改文件权限：
   * 所有者拥有读写权限：
     ```bash
     chmod 600 test.txt
     ```
   * 所有者和属组拥有读写权限：
     ```bash
     chmod 660 test.txt
     ```
   * 所有者拥有读写和执行权限：
     ```bash
     chmod 700 test.txt
     ```
   * 所有者和属组拥有读写和执行权限：
     ```bash
     chmod 770 test.txt
     ```
   * 所有用户拥有读写和执行权限：
     ```bash
     chmod 777 test.txt
     ```

---

### 常见权限表示

| **权限符号** | **数字表示** | **说明**                                   |
| -------------------- | -------------------- | -------------------------------------------------- |
| `-rw-------`   | `600`          | 只有拥有者有读写权限。                           |
| `-rw-r--r--`   | `644`          | 拥有者有读写权限；属组用户和其他用户只有读权限。 |
| `-rwx------`   | `700`          | 只有拥有者有读写和执行权限。                     |
| `-rwxr-xr-x`   | `755`          | 拥有者有读写和执行权限；其他用户有读和执行权限。 |
| `-rwx--x--x`   | `711`          | 拥有者有读写和执行权限；其他用户只有执行权限。   |
| `-rw-rw-rw-`   | `666`          | 所有用户有读写权限。                             |
| `-rwxrwxrwx`   | `777`          | 所有用户有读写和执行权限。                       |

---

### 总结

* 文件权限由文件的类型、用户权限（`rwx`）以及所属组权限组成。
* `chmod` 修改文件权限，`chown` 和 `chgrp` 修改文件的所有者和所属组。
* 根据需求合理设置权限，可以有效保证系统的安全性和灵活性。

