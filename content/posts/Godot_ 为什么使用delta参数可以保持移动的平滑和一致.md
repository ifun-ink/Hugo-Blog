---
title:  Godot:为什么使用delta参数可以保持移动的平滑和一致 
subtitle:
date: 2023-09-25T21:41:18+08:00
slug: XcAeEGCl
categories:
  - 系统管理
---

**帧率（Frame Rate）**：每秒渲染的帧数，通常用FPS表示。帧率越高，游戏运行越流畅。

在游戏实际运行中，帧与帧之间的时间间隔（即 `delta`）通常会有所变化。具体原因包括：

- **硬件性能差异**：不同的硬件设备具有不同的处理能力，可能会导致每帧渲染的时间不同。
- **场景复杂度**：场景中的对象数量、渲染复杂度等因素会影响每帧的渲染时间。
- **系统负载**：其他后台运行的程序和操作系统的任务调度会影响可用于渲染每一帧的资源。

在游戏开发中，我们希望无论帧率如何变化，物体的运动速度（像素/秒）都是一致的。为此，我们需要根据每帧之间的时间间隔来调整移动的距离，这就是 `delta` 发挥作用的地方。

在游戏运动控制中，经常会看到这样的代码：

```
var speed = 400 #移动400像素
func _process(delta):
    position.x += speed * delta
```

- **_process(delta)**：每帧调用一次，用于处理非物理相关的游戏逻辑。
- **speed**：x轴方向上的移动距离
- **delta**：以秒为单位的时间间隔。

#### 假设不乘以 `delta`:

在60 FPS下，每秒调用 `_process(delta)` 60次：1秒移动距离 = 400 * 60 = 24000 像素

在30 FPS下，每秒调用 `_process(delta)` 30次: 1秒移动距离 = 400 * 30 = 12000 像素

也就是说，帧率越高，每秒移动的距离就越远。

#### 乘以 `delta`之后：

**在 60 FPS 下：**

- `delta ≈ 1/60 = 0.0167` 秒
- 每帧移动距离 = `speed * delta = 400 * 0.0167 ≈ 6.67` 像素

每1秒会调用 `_process` 60 次，总移动距离是：

```
60 帧 * 6.67 像素 ≈ 400 像素
```

**在 30 FPS 下**

- `delta ≈ 1/30 = 0.0333` 秒
- 每帧移动距离 = `speed * delta = 400 * 0.0333 ≈ 13.33` 像素

每1秒会调用 `_process` 30 次，总移动距离是：

```
30 帧 * 13.33 像素 ≈ 400 像素
```

通过乘以 delta，我们将每帧的运动距离转换成每秒的运动距离。从而实现无论帧率如何变化，我们**每秒移动的距离**都能保持大致相同，从而实现帧率无关的平滑运动。

---

通过对 `delta` 的使用，我们能够确保物体的运动在不同的帧率下保持一致性和平滑性。这是因为 `delta` 将速度与时间关联起来，而不是与帧数关联，从而避免了帧率波动对运动速度的影响。
